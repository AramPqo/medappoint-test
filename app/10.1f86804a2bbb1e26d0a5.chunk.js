(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{203:function(e,t,n){n.d(t,"a",(function(){return d}));var c=n(0),s=n(22),i=n(24),o=n(55),a=n(56),r=n(6);class d{constructor(e,t,n,c){this.router=e,this.loginModalService=t,this.accountService=n,this.stateStorageService=c}canActivate(e,t){e.data.authorities;return Object(s.a)(!0)}checkLogin(e,t){return Object(s.a)(!0)}}d.ɵfac=function(e){return new(e||d)(c.sc(r.d),c.sc(o.a),c.sc(i.a),c.sc(a.a))},d.ɵprov=c.ac({token:d,factory:d.ɵfac,providedIn:"root"})},204:function(e,t,n){n.d(t,"a",(function(){return c}));const c=(e,t)=>{var n;const c=e.map(e=>e.id).indexOf(null===(n=e.find(e=>e.id===t.id))||void 0===n?void 0:n.id);return e=-1!==c?[...e.slice(0,c),t,...e.slice(c+1,e.length)]:[...e,t]}},239:function(e,t,n){n.r(t),n.d(t,"MedappointExpenseModule",(function(){return _}));var c=n(0),s=n(6),i=n(57),o=n(7),a=n(15),r=n(14),d=n(27);class l{constructor(e){this.http=e,this.resourceUrl="http://localhost:3000/expenses"}create(e){const t=this.convertDateFromClient(e);return this.http.post(this.resourceUrl,t,{observe:"response"})}update(e){const t=this.convertDateFromClient(e);return this.http.put(this.resourceUrl,t,{observe:"response"})}find(e){return this.http.get(`${this.resourceUrl}/${e}`,{observe:"response"}).pipe(Object(a.a)(e=>this.convertDateFromServer(e)))}getAllExpensePDF(e){let t=new o.e;t=t.set("Accept","application/pdf");const n=Object(d.a)(e);return this.http.get("api/expenses_pdf",{params:n,headers:t,responseType:"blob",observe:"response"})}query(e){const t=Object(d.a)(e);return this.http.get(this.resourceUrl,{params:t,observe:"response"}).pipe(Object(a.a)(e=>this.convertDateArrayFromServer(e)))}delete(e){return this.http.delete(`${this.resourceUrl}/${e}`,{observe:"response"})}convertDateFromClient(e){return Object.assign({},e,{date:e.date&&e.date.isValid()?e.date.toJSON():void 0})}convertDateArrayFromServer(e){return e.body&&e.body.forEach(e=>{e.date=e.date?r(e.date):void 0}),e}convertDateFromServer(e){return e.body&&(e.body.date=e.body.date?r(e.body.date):void 0),e}}l.ɵfac=function(e){return new(e||l)(c.sc(o.b))},l.ɵprov=c.ac({token:l,factory:l.ɵfac,providedIn:"root"});var u=n(156),p=n(204),m=n(39),b=n(90),h=n(9),v=n(4),f=n(88);class j{constructor(e,t,n,c,s){this.expenseService=e,this.eventManager=t,this.modalService=n,this.route=c,this.resizeService=s,this.expenses=[],this.dateRange={fromDate:r(new Date(Date.now())).format(b.a),toDate:r((new Date).setDate((new Date).getDate()+30)).format(b.a)},this.headerActions=[{label:"Print",name:"print",method:"printJournls",iconName:"print"}],this.selectActions=[],this.formFields=[{key:"date",type:"medappointDate",tskey:"medappointApp.expense.date",defaultValue:r().startOf("day"),templateOptions:{keyCode:"date",label:"Date"}},{fieldGroupClassName:"row",fieldGroup:[{className:"col-6",type:"input",key:"accountNumber",tskey:"medappointApp.expense.accountNumber",templateOptions:{label:"Account Number",keyCode:"accountNumber",required:!0}},{className:"col-6",type:"input",key:"voucherNumber",tskey:"medappointApp.expense.voucherNumber",templateOptions:{label:"Voucher Number",keyCode:"voucherNumber",required:!0}}]},{key:"name",type:"input",tskey:"medappointApp.expense.name",defaultValue:"",templateOptions:{keyCode:"name",required:!0,label:"name"}},{key:"subject",type:"input",tskey:"medappointApp.expense.subject",defaultValue:"",templateOptions:{keyCode:"subject",required:!0,label:"subject"}},{key:"total",type:"input",tskey:"medappointApp.expense.total",defaultValue:"",templateOptions:{keyCode:"total",required:!0,type:"number",label:"total"}}],this.tableHeaders=[{columnsValue:"date",fieldName:"medappointApp.expense.date",width:"14%",sortable:!0},{columnsValue:"accountNumber",fieldName:"medappointApp.expense.accountNumber",width:"14%",sortable:!0},{columnsValue:"voucherNumber",fieldName:"medappointApp.expense.voucherNumber",width:"14%",sortable:!0},{columnsValue:"name",fieldName:"medappointApp.expense.name",width:"14%",sortable:!0},{columnsValue:"subject",fieldName:"medappointApp.expense.subject",width:"14%",sortable:!0},{columnsValue:"total",fieldName:"medappointApp.expense.total",width:"14%",sortable:!0}]}loadAll(){this.expenseService.query({}).subscribe(e=>this.paginateExpense(e.body),e=>console.log(e))}ngOnInit(){this.resizeService.isDesktop||(this.headerActions=null,this.selectActions=[{label:"Print Selected",name:"printAll",method:"printSelected"}]),this.route.data.pipe(Object(u.a)(({business:e})=>{this.business=e})).subscribe(()=>this.loadAll())}createValidDate(e,t){return r.isMoment(e)?e.format(t):r(e).format(t)}getDateRange(e){this.dateRange=e,this.loadAll()}delete(e){const t=Object.keys(e);for(let e=0;e<t.length;e++)this.expenseService.delete(parseInt(t[e])).subscribe(n=>{e+1===t.length&&this.loadAll()})}getSelectedData({method:e,rows:t}){this[e](t)}getAction(e){this.expenseService.update(e).subscribe(t=>{this.expenses.find(t=>t.id===e.id).printIcon.disabled=!0})}getHeaderAction(e){const t={businessId:1,fromDate:this.dateRange.fromDate,toDate:this.dateRange.toDate};this.expenseService.getAllExpensePDF(t).subscribe(e=>{const t=new Blob([e.body],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n)})}updateExpense(e){void 0!==e.id?this.subscribeToSaveResponse(this.expenseService.update(e),e):this.subscribeToSaveResponse(this.expenseService.create(e),e)}subscribeToSaveResponse(e,t){e.subscribe(e=>this.onSaveSuccess(e.body),()=>this.onError())}onSaveSuccess(e){this.expenses=Object(p.a)(this.expenses,e),this.paginateExpense(this.expenses)}onError(){console.log("Error")}paginateExpense(e){var t,n;if(e){this.expenses=[];for(let c=0;c<e.length;c++)!e[c].date||(e[c].date=this.createValidDate(e[c].date,"MM.DD.YYYY")),e[c].business=(null===(t=this.business.find(t=>t.id===e[c].businessId))||void 0===t?void 0:t.name)?null===(n=this.business.find(t=>t.id===e[c].businessId))||void 0===n?void 0:n.name:"-",e[c].printIcon={iconName:"print"},this.expenses.push(e[c])}}trackId(e,t){return t.id}}j.ɵfac=function(e){return new(e||j)(c.ec(l),c.ec(h.d),c.ec(v.o),c.ec(s.a),c.ec(m.a))},j.ɵcmp=c.Yb({type:j,selectors:[["jhi-expense"]],decls:3,vars:7,consts:[["title","expense",3,"tableHeaders","data","searchByDate","selectActions","headerActions","formFields","isLocalDateFilter","headerActionEmit","selectedEmit","actionEmit","updateEmit"]],template:function(e,t){1&e&&(c.kc(0,"jhi-data-table",0),c.vc("headerActionEmit",(function(e){return t.getHeaderAction(e)}))("selectedEmit",(function(e){return t.getSelectedData(e)}))("actionEmit",(function(e){return t.getAction(e)}))("updateEmit",(function(e){return t.updateExpense(e)})),c.Zc(1,"\n"),c.jc(),c.Zc(2,"\n")),2&e&&c.Fc("tableHeaders",t.tableHeaders)("data",t.expenses)("searchByDate",!0)("selectActions",t.selectActions)("headerActions",t.headerActions)("formFields",t.formFields)("isLocalDateFilter",!0)},directives:[f.a],encapsulation:2});class g{constructor(e,t,n,c,s,i,o,a){this.id=e,this.accountNumber=t,this.date=n,this.businessId=c,this.name=s,this.subject=i,this.total=o,this.voucherNumber=a}}var Z=n(3),y=n(69),k=n(1),x=n(25);function S(e,t){if(1&e){const e=c.lc();c.kc(0,"button",32),c.vc("click",(function(){c.Qc(e);const n=t.$implicit;return c.yc().setExpenseItem(n,"business","name")})),c.Zc(1,"\n                                "),c.kc(2,"span"),c.Zc(3),c.jc(),c.Zc(4,"\n                            "),c.jc()}if(2&e){const e=t.$implicit,n=t.index,s=c.yc();c.Wb("active-item",s.selectedItem===n),c.Rb(3),c.ad(e.name)}}function F(e,t){1&e&&(c.kc(0,"small",34),c.Zc(1,"\n                                This field is required.\n                            "),c.jc())}function N(e,t){if(1&e&&(c.kc(0,"div"),c.Zc(1,"\n                            "),c.Xc(2,F,2,0,"small",33),c.Zc(3,"\n                        "),c.jc()),2&e){var n;const e=null==(n=c.yc().editForm.get("name"))||null==n.errors?null:n.errors.required;c.Rb(2),c.Fc("ngIf",e)}}class A{constructor(e,t,n){this.expenseService=e,this.activatedRoute=t,this.fb=n,this.isSaving=!1,this.editForm=this.fb.group({id:[],businessId:[],date:[],accountNumber:[],voucherNumber:[],name:[],subject:[],total:[]}),this.dropdownsForm={business:"Businnes"}}ngOnInit(){this.activatedRoute.data.subscribe(({expense:e,business:t})=>{this.business=t,this.updateForm(e),this.getDropdownsForm(e,t)})}updateForm(e){this.editForm.patchValue({id:e.id,businessId:e.businessId,date:e.date?e.date.format(b.a):null,accountNumber:e.accountNumber,voucherNumber:e.voucherNumber,name:e.name,subject:e.subject,total:e.total})}previousState(){window.history.back(),console.clear()}setExpenseItem(e,t,n){this.dropdownsForm[t]=e[n],this.editForm.get(t+"Id").patchValue(e.id)}save(){this.isSaving=!0;const e=this.createForm();void 0!==e.id?this.subscribeToSaveResponse(this.expenseService.update(e)):this.subscribeToSaveResponse(this.expenseService.create(e))}createForm(){return Object.assign(Object.assign({},new g),{id:this.editForm.get("id").value,businessId:this.editForm.get("businessId").value,date:this.editForm.get(["date"]).value?r(this.editForm.get(["date"]).value,b.a):void 0,accountNumber:this.editForm.get("accountNumber").value,voucherNumber:this.editForm.get("voucherNumber").value,name:this.editForm.get("name").value,subject:this.editForm.get("subject").value,total:this.editForm.get("total").value})}getDropdownsForm(e,t){var n;this.dropdownsForm={business:null===(n=t.find(t=>t.id===e.businessId))||void 0===n?void 0:n.name}}subscribeToSaveResponse(e){e.subscribe(()=>this.onSaveSuccess(),()=>this.onSaveError())}onSaveSuccess(){this.isSaving=!1,this.previousState()}onSaveError(){this.isSaving=!1}}A.ɵfac=function(e){return new(e||A)(c.ec(l),c.ec(s.a),c.ec(Z.e))},A.ɵcmp=c.Yb({type:A,selectors:[["jhi-expense-update"]],decls:117,vars:5,consts:[[1,"row","justify-content-center"],[1,"col-8"],["name","editForm","role","form","novalidate","",3,"formGroup"],["id","jhi-expense-heading","jhiTranslate","medappointApp.expense.home.createOrEditLabel"],["ngbDropdown","","placement","bottom-right",1,"form-group"],["for","business_field"],["ngbDropdown","",1,"dropdown-content"],["id","business_field","ngbDropdownToggle","",1,"form-control"],["ngbDropdownMenu","","aria-labelledby","business_field",1,"dropdown-menu"],["ngbDropdownItem","",3,"active-item","click",4,"ngFor","ngForOf"],[1,"form-group"],["jhiTranslate","medappointApp.expense.name","for","field_name",1,"form-control-label"],["type","text","name","name","id","field_name","formControlName","name",1,"form-control"],[4,"ngIf"],["for","field_date",1,"form-control-label"],[1,"d-flex"],["id","field_date","type","date","name","date","formControlName","date","placeholder","YYYY-MM-DD HH:mm",1,"form-control"],["for","field_accountNumber",1,"form-control-label"],["type","text","name","accountNumber","id","field_accountNumber","formControlName","accountNumber",1,"form-control"],[1,"info-container"],["for","field_voucherNumber",1,"form-control-label"],["type","text","name","voucherNumber","id","field_voucherNumber","formControlName","voucherNumber",1,"form-control"],["for","field_subject",1,"form-control-label"],["type","text","name","subject","id","field_subject","formControlName","subject",1,"form-control"],["for","field_total",1,"form-control-label"],["type","text","name","total","id","field_total","formControlName","total",1,"form-control"],["type","button","id","cancel-save",1,"btn","btn-secondary",3,"click"],["icon","ban"],["jhiTranslate","entity.action.cancel"],["type","submit","id","save-entity",1,"btn","btn-primary",3,"disabled","click"],["icon","save"],["jhiTranslate","entity.action.save"],["ngbDropdownItem","",3,"click"],["class","form-text text-danger","jhiTranslate","entity.validation.required",4,"ngIf"],["jhiTranslate","entity.validation.required",1,"form-text","text-danger"]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.Zc(1,"\n    "),c.kc(2,"div",1),c.Zc(3,"\n        "),c.kc(4,"form",2),c.Zc(5,"\n            "),c.kc(6,"h2",3),c.Zc(7,"Create or edit a\n                Expense"),c.jc(),c.Zc(8,"\n\n            "),c.kc(9,"div"),c.Zc(10,"\n                "),c.fc(11,"jhi-alert-error"),c.Zc(12,"\n\n                "),c.kc(13,"div",4),c.Zc(14,"\n                    "),c.kc(15,"label",5),c.Zc(16," Business "),c.jc(),c.Zc(17,"\n                    "),c.kc(18,"div",6),c.Zc(19,"\n                        "),c.kc(20,"button",7),c.Zc(21),c.jc(),c.Zc(22,"\n                        "),c.kc(23,"div",8),c.Zc(24,"\n                            "),c.Xc(25,S,5,3,"button",9),c.Zc(26,"\n                        "),c.jc(),c.Zc(27,"\n                    "),c.jc(),c.Zc(28,"\n\n                    "),c.kc(29,"div",10),c.Zc(30,"\n                        "),c.kc(31,"label",11),c.Zc(32,"Name"),c.jc(),c.Zc(33,"\n                        "),c.fc(34,"input",12),c.Zc(35,"\n                        "),c.Xc(36,N,4,1,"div",13),c.Zc(37,"\n                    "),c.jc(),c.Zc(38,"\n\n                    "),c.kc(39,"div",10),c.Zc(40,"\n                        "),c.kc(41,"label",14),c.Zc(42," Date"),c.jc(),c.Zc(43,"\n                        "),c.kc(44,"div",15),c.Zc(45,"\n                            "),c.fc(46,"input",16),c.Zc(47,"\n                        "),c.jc(),c.Zc(48,"\n                    "),c.jc(),c.Zc(49,"\n                "),c.jc(),c.Zc(50,"\n\n                "),c.kc(51,"div",10),c.Zc(52,"\n                    "),c.kc(53,"label",17),c.Zc(54," Account Number "),c.jc(),c.Zc(55,"\n                    "),c.fc(56,"input",18),c.Zc(57,"\n                    "),c.kc(58,"div",19),c.Zc(59,"\n                    "),c.jc(),c.Zc(60,"\n                "),c.jc(),c.Zc(61,"\n\n                "),c.kc(62,"div",10),c.Zc(63,"\n                    "),c.kc(64,"label",20),c.Zc(65," Voucher Number "),c.jc(),c.Zc(66,"\n                    "),c.fc(67,"input",21),c.Zc(68,"\n                    "),c.kc(69,"div",19),c.Zc(70,"\n                    "),c.jc(),c.Zc(71,"\n                "),c.jc(),c.Zc(72,"\n\n                "),c.kc(73,"div",10),c.Zc(74,"\n                    "),c.kc(75,"label",22),c.Zc(76," Subject "),c.jc(),c.Zc(77,"\n                    "),c.fc(78,"input",23),c.Zc(79,"\n                    "),c.kc(80,"div",19),c.Zc(81,"\n                    "),c.jc(),c.Zc(82,"\n                "),c.jc(),c.Zc(83,"\n\n                "),c.kc(84,"div",10),c.Zc(85,"\n                    "),c.kc(86,"label",24),c.Zc(87," Total "),c.jc(),c.Zc(88,"\n                    "),c.fc(89,"input",25),c.Zc(90,"\n                    "),c.kc(91,"div",19),c.Zc(92,"\n                    "),c.jc(),c.Zc(93,"\n                "),c.jc(),c.Zc(94,"\n\n                "),c.kc(95,"div"),c.Zc(96,"\n                    "),c.kc(97,"button",26),c.vc("click",(function(){return t.previousState()})),c.Zc(98,"\n                        "),c.fc(99,"fa-icon",27),c.Zc(100," "),c.kc(101,"span",28),c.Zc(102,"Cancel"),c.jc(),c.Zc(103,"\n                    "),c.jc(),c.Zc(104,"\n\n                    "),c.kc(105,"button",29),c.vc("click",(function(){return t.save()})),c.Zc(106,"\n                        "),c.fc(107,"fa-icon",30),c.Zc(108," "),c.kc(109,"span",31),c.Zc(110,"Save"),c.jc(),c.Zc(111,"\n                    "),c.jc(),c.Zc(112,"\n                "),c.jc(),c.Zc(113,"\n            "),c.jc(),c.Zc(114,"\n        "),c.jc(),c.Zc(115,"\n    "),c.jc(),c.Zc(116,"\n"),c.jc()),2&e&&(c.Rb(4),c.Fc("formGroup",t.editForm),c.Rb(17),c.bd("\n                            ",t.dropdownsForm.business,"\n                        "),c.Rb(4),c.Fc("ngForOf",t.business),c.Rb(11),c.Fc("ngIf",t.editForm.get("name").invalid&&(t.editForm.get("name").dirty||t.editForm.get("name").touched)),c.Rb(69),c.Fc("disabled",t.editForm.invalid||t.isSaving))},directives:[Z.A,Z.o,Z.j,h.n,y.a,v.j,v.m,v.l,k.n,Z.c,Z.n,Z.h,k.o,x.a,v.k],encapsulation:2});var w=n(22),D=n(63),O=n(94),I=n(115),E=n(203),R=n(116);class T{constructor(e,t){this.service=e,this.router=t}resolve(e){const t=e.params.id;return t?this.service.find(t).pipe(Object(O.a)(e=>e.body?Object(w.a)(e.body):(this.router.navigate(["404"]),D.a))):Object(w.a)(new g)}}T.ɵfac=function(e){return new(e||T)(c.sc(l),c.sc(s.d))},T.ɵprov=c.ac({token:T,factory:T.ɵfac,providedIn:"root"});class C{constructor(e){this.service=e}resolve(){return this.service.query().pipe(Object(a.a)(e=>e.body))}}C.ɵfac=function(e){return new(e||C)(c.sc(R.a))},C.ɵprov=c.ac({token:C,factory:C.ɵfac,providedIn:"root"});const V=[{path:"",component:j,data:{authorities:[I.a.USER],pageTitle:"medappointApp.expense.home.title"},resolve:{business:C},canActivate:[E.a]},{path:"new",component:A,resolve:{expense:T,business:C},data:{authorities:[I.a.USER],pageTitle:"medappointApp.expense.home.title"},canActivate:[E.a]},{path:":id/edit",component:A,resolve:{expense:T,business:C},data:{authorities:[I.a.USER],pageTitle:"medappointApp.expense.home.title"},canActivate:[E.a]}];class _{}_.ɵmod=c.cc({type:_}),_.ɵinj=c.bc({factory:function(e){return new(e||_)},imports:[[i.a,s.h.forChild(V)]]}),("undefined"==typeof ngJitMode||ngJitMode)&&c.Tc(_,{declarations:[j,A],imports:[i.a,s.h]})}}]);