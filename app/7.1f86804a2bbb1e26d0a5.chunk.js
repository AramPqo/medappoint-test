(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{203:function(e,t,r){r.d(t,"a",(function(){return l}));var a=r(0),o=r(22),n=r(24),s=r(55),i=r(56),c=r(6);class l{constructor(e,t,r,a){this.router=e,this.loginModalService=t,this.accountService=r,this.stateStorageService=a}canActivate(e,t){e.data.authorities;return Object(o.a)(!0)}checkLogin(e,t){return Object(o.a)(!0)}}l.ɵfac=function(e){return new(e||l)(a.sc(c.d),a.sc(s.a),a.sc(n.a),a.sc(i.a))},l.ɵprov=a.ac({token:l,factory:l.ɵfac,providedIn:"root"})},204:function(e,t,r){r.d(t,"a",(function(){return a}));const a=(e,t)=>{var r;const a=e.map(e=>e.id).indexOf(null===(r=e.find(e=>e.id===t.id))||void 0===r?void 0:r.id);return e=-1!==a?[...e.slice(0,a),t,...e.slice(a+1,e.length)]:[...e,t]}},206:function(e,t,r){r.d(t,"a",(function(){return s}));var a=r(0),o=r(27),n=r(7);class s{constructor(e){this.http=e,this.resourceUrl="http://localhost:3000/currencies"}create(e){return this.http.post(this.resourceUrl,e,{observe:"response"})}update(e){return this.http.put(this.resourceUrl,e,{observe:"response"})}find(e){return this.http.get(`${this.resourceUrl}/${e}`,{observe:"response"})}query(e){const t=Object(o.a)(e);return this.http.get(this.resourceUrl,{params:t,observe:"response"})}delete(e){return this.http.delete(`${this.resourceUrl}/${e}`,{observe:"response"})}}s.ɵfac=function(e){return new(e||s)(a.sc(n.b))},s.ɵprov=a.ac({token:s,factory:s.ɵfac,providedIn:"root"})},244:function(e,t,r){r.r(t),r.d(t,"MedappointJournalModule",(function(){return O}));var a=r(0),o=r(6),n=r(57),s=r(7),i=r(15),c=r(14),l=r(27);class u{constructor(e){this.http=e,this.resourceUrl="http://localhost:3000/journal"}query(e){const t=Object(l.a)(e);return this.http.get(this.resourceUrl,{params:t,observe:"response"}).pipe(Object(i.a)(e=>this.convertDateArrayFromServer(e)))}getAllJournalPDF(e){let t=new s.e;t=t.set("Accept","application/pdf");const r=Object(l.a)(e);return this.http.get("api/journal_pdf",{params:r,headers:t,responseType:"blob",observe:"response"})}getJournalPdfById(e){let t=new s.e;return t=t.set("Accept","application/pdf"),this.http.get("api/journal_pdf/"+e,{headers:t,responseType:"blob",observe:"response"})}convertDateArrayFromServer(e){return e.body&&e.body.forEach(e=>{e.date=e.date?c(e.date):void 0}),e}}u.ɵfac=function(e){return new(e||u)(a.sc(s.b))},u.ɵprov=a.ac({token:u,factory:u.ɵfac,providedIn:"root"});var d=r(156),p=r(204),h=r(39),m=r(90),f=r(9),b=r(4),v=r(88);class j{constructor(e,t,r,a,o){this.journalService=e,this.eventManager=t,this.modalService=r,this.route=a,this.resizeService=o,this.journals=[],this.dateRange={fromDate:c(new Date(Date.now())).format(m.a),toDate:c((new Date).setDate((new Date).getDate()+30)).format(m.a)},this.headerActions=[{label:"Print",name:"print",method:"getHeaderAction",iconName:"print"}],this.tableHeaders=[{columnsValue:"id",fieldName:"medappointApp.journal.id",width:"5%",sortable:!0},{columnsValue:"date",fieldName:"medappointApp.journal.date",width:"9%",sortable:!0},{columnsValue:"status",fieldName:"medappointApp.journal.journalStatus",width:"9%",sortable:!0},{columnsValue:"paymentStatus",fieldName:"medappointApp.journal.paymentStatus",width:"9%",sortable:!0},{columnsValue:"paymentType",fieldName:"medappointApp.journal.paymentType",width:"9%",sortable:!0},{columnsValue:"accountNumber",fieldName:"medappointApp.journal.accountNumber",width:"9%",sortable:!0},{columnsValue:"voucherNumber",fieldName:"medappointApp.journal.voucherNumber",width:"9%",sortable:!0},{columnsValue:"name",fieldName:"medappointApp.journal.name",width:"13%",sortable:!0},{columnsValue:"subject",fieldName:"medappointApp.journal.subject",width:"9%",sortable:!0},{columnsValue:"currency",fieldName:"medappointApp.journal.currency",width:"9%",sortable:!0},{columnsValue:"total",fieldName:"medappointApp.journal.total",width:"9%",sortable:!0}]}loadAll(){this.journalService.query(this.dateRange).subscribe(e=>this.paginateJournal(e.body),e=>console.log(e))}ngOnInit(){this.resizeService.isDesktop||(this.headerActions=null,this.selectActions=[{label:"Print All",name:"printAll",method:"printAllSelected"},{label:"Print Selected",name:"printSelected",method:"printSelected"}]),this.route.data.pipe(Object(d.a)(({business:e,currencies:t})=>{this.business=e,this.currencies=t})).subscribe(()=>this.loadAll())}createValidDate(e,t){return c.isMoment(e)?e.format(t):c(e).format(t)}deleteJournal(e){}getDateRange(e){this.dateRange=e,this.loadAll()}getSelectedData({method:e,rows:t}){this[e](t)}getAction(e){}getHeaderAction(e){const t={businessId:1,fromDate:this.dateRange.fromDate,toDate:this.dateRange.toDate};this.journalService.getAllJournalPDF(t).subscribe(e=>{const t=new Blob([e.body],{type:"application/pdf"}),r=URL.createObjectURL(t);window.open(r)})}printSelected(e){let t=[];Object.keys(e).map(e=>+e).filter(t=>e[t]).forEach(e=>{t=[...t,this.journals.find(t=>t.id==e)]}),t.sort((e,t)=>c.utc(e.date).diff(c.utc(t.date)));const r=t.filter(e=>!!e.date),a={businessId:1,fromDate:c(r[0].date).format("YYYY-MM-DD"),toDate:c(r[r.length-1].date).format("YYYY-MM-DD")};this.journalService.getAllJournalPDF(a).subscribe(e=>{const t=new Blob([e.body],{type:"application/pdf"}),r=URL.createObjectURL(t);window.open(r)})}printAllSelected(e){this.journals.sort((e,t)=>c.utc(e.date).diff(c.utc(t.date)));const t=this.journals.filter(e=>!!e.date),r={businessId:1,fromDate:c(t[0].date).format("YYYY-MM-DD"),toDate:c(t[t.length-1].date).format("YYYY-MM-DD")};this.journalService.getAllJournalPDF(r).subscribe(e=>{const t=new Blob([e.body],{type:"application/pdf"}),r=URL.createObjectURL(t);window.open(r)})}updateJournal(e){}subscribeToSaveResponse(e,t){e.subscribe(e=>this.onSaveSuccess(e.body),()=>this.onError())}onSaveSuccess(e){this.journals=Object(p.a)(this.journals,e),this.paginateJournal(this.journals)}onError(){console.log("Error")}paginateJournal(e){var t,r;if(e){this.journals=[];for(let a=0;a<e.length;a++)e[a].printIcon={iconName:"print"},!e[a].date||(e[a].date=this.createValidDate(e[a].date,"MM.DD.YYYY")),e[a].currency=(null===(t=this.currencies.find(t=>t.id===e[a].currencyId))||void 0===t?void 0:t.isoCode)?null===(r=this.currencies.find(t=>t.id===e[a].currencyId))||void 0===r?void 0:r.isoCode:"-",this.journals.push(e[a])}}trackId(e,t){return t.id}}j.ɵfac=function(e){return new(e||j)(a.ec(u),a.ec(f.d),a.ec(b.o),a.ec(o.a),a.ec(h.a))},j.ɵcmp=a.Yb({type:j,selectors:[["jhi-journal"]],decls:3,vars:8,consts:[["title","journal",3,"tableHeaders","data","isCreated","isDeleted","isOnlyView","headerActions","selectActions","searchByDate","dateRangeEmit","actionEmit","updateEmit","headerActionEmit","selectedEmit"]],template:function(e,t){1&e&&(a.kc(0,"jhi-data-table",0),a.vc("dateRangeEmit",(function(e){return t.getDateRange(e)}))("actionEmit",(function(e){return t.getAction(e)}))("updateEmit",(function(e){return t.updateJournal(e)}))("headerActionEmit",(function(e){return t.getHeaderAction(e)}))("selectedEmit",(function(e){return t.getSelectedData(e)})),a.Zc(1,"\n"),a.jc(),a.Zc(2,"\n")),2&e&&a.Fc("tableHeaders",t.tableHeaders)("data",t.journals)("isCreated",!1)("isDeleted",!1)("isOnlyView",!0)("headerActions",t.headerActions)("selectActions",t.selectActions)("searchByDate",!0)},directives:[v.a],encapsulation:2});var y=r(115),g=r(203),A=r(116),D=r(206);class w{constructor(e){this.service=e}resolve(){return this.service.query().pipe(Object(i.a)(e=>e.body))}}w.ɵfac=function(e){return new(e||w)(a.sc(A.a))},w.ɵprov=a.ac({token:w,factory:w.ɵfac,providedIn:"root"});class S{constructor(e){this.service=e}resolve(){return this.service.query().pipe(Object(i.a)(e=>e.body))}}S.ɵfac=function(e){return new(e||S)(a.sc(D.a))},S.ɵprov=a.ac({token:S,factory:S.ɵfac,providedIn:"root"});const Y=[{path:"",component:j,data:{authorities:[y.a.USER],pageTitle:"medappointApp.journal.home.title"},resolve:{business:w,currencies:S},canActivate:[g.a]}];class O{}O.ɵmod=a.cc({type:O}),O.ɵinj=a.bc({factory:function(e){return new(e||O)},imports:[[n.a,o.h.forChild(Y)]]}),("undefined"==typeof ngJitMode||ngJitMode)&&a.Tc(O,{declarations:[j],imports:[n.a,o.h]})}}]);