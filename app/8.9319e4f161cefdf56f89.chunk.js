(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{212:function(e,t,a){a.d(t,"a",(function(){return l}));var n=a(0),i=a(24),o=a(27),r=a(57),s=a(58),c=a(7);class l{constructor(e,t,a,n){this.router=e,this.loginModalService=t,this.accountService=a,this.stateStorageService=n}canActivate(e,t){e.data.authorities;return Object(i.a)(!0)}checkLogin(e,t){return Object(i.a)(!0)}}l.ɵfac=function(e){return new(e||l)(n.sc(c.d),n.sc(r.a),n.sc(o.a),n.sc(s.a))},l.ɵprov=n.ac({token:l,factory:l.ɵfac,providedIn:"root"})},213:function(e,t,a){a.d(t,"a",(function(){return n}));const n=(e,t)=>{var a;const n=e.map(e=>e.id).indexOf(null===(a=e.find(e=>e.id===t.id))||void 0===a?void 0:a.id);return e=-1!==n?[...e.slice(0,n),t,...e.slice(n+1,e.length)]:[...e,t]}},253:function(e,t,a){a.r(t),a.d(t,"MedappointJournalModule",(function(){return S}));var n=a(0),i=a(7),o=a(59),r=a(134),s=a(8),c=a(165),l=a(213),d=a(39),u=a(98),p=a(10),h=a(5),m=a(97);class f{constructor(e,t,a,n,i){this.journalService=e,this.eventManager=t,this.modalService=a,this.route=n,this.resizeService=i,this.journals=[],this.dateRange={fromDate:s(new Date(Date.now())).format(u.a),toDate:s((new Date).setDate((new Date).getDate()+30)).format(u.a)},this.headerActions=[{label:"Print",name:"print",method:"getHeaderAction",iconName:"print"}],this.tableHeaders=[{columnsValue:"id",fieldName:"medappointApp.journal.id",width:"5%",sortable:!0},{columnsValue:"date",fieldName:"medappointApp.journal.date",width:"9%",sortable:!0},{columnsValue:"status",fieldName:"medappointApp.journal.journalStatus",width:"9%",sortable:!0},{columnsValue:"paymentStatus",fieldName:"medappointApp.journal.paymentStatus",width:"9%",sortable:!0},{columnsValue:"paymentType",fieldName:"medappointApp.journal.paymentType",width:"9%",sortable:!0},{columnsValue:"accountNumber",fieldName:"medappointApp.journal.accountNumber",width:"9%",sortable:!0},{columnsValue:"voucherNumber",fieldName:"medappointApp.journal.voucherNumber",width:"9%",sortable:!0},{columnsValue:"name",fieldName:"medappointApp.journal.name",width:"13%",sortable:!0},{columnsValue:"subject",fieldName:"medappointApp.journal.subject",width:"9%",sortable:!0},{columnsValue:"currency",fieldName:"medappointApp.journal.currency",width:"9%",sortable:!0},{columnsValue:"total",fieldName:"medappointApp.journal.total",width:"9%",sortable:!0}]}loadAll(){this.journalService.query(this.dateRange).subscribe(e=>this.paginateJournal(e.body),e=>console.log(e))}ngOnInit(){this.resizeService.isDesktop||(this.headerActions=null,this.selectActions=[{label:"Print All",name:"printAll",method:"printAllSelected"},{label:"Print Selected",name:"printSelected",method:"printSelected"}]),this.route.data.pipe(Object(c.a)(({business:e,currencies:t})=>{this.business=e,this.currencies=t})).subscribe(()=>this.loadAll())}createValidDate(e,t){return s.isMoment(e)?e.format(t):s(e).format(t)}deleteJournal(e){}getDateRange(e){this.dateRange=e,this.loadAll()}getSelectedData({method:e,rows:t}){this[e](t)}getAction(e){}getHeaderAction(e){const t={businessId:1,fromDate:this.dateRange.fromDate,toDate:this.dateRange.toDate};this.journalService.getAllJournalPDF(t).subscribe(e=>{const t=new Blob([e.body],{type:"application/pdf"}),a=URL.createObjectURL(t);window.open(a)})}printSelected(e){let t=[];Object.keys(e).map(e=>+e).filter(t=>e[t]).forEach(e=>{t=[...t,this.journals.find(t=>t.id==e)]}),t.sort((e,t)=>s.utc(e.date).diff(s.utc(t.date)));const a=t.filter(e=>!!e.date),n={businessId:1,fromDate:s(a[0].date).format("YYYY-MM-DD"),toDate:s(a[a.length-1].date).format("YYYY-MM-DD")};this.journalService.getAllJournalPDF(n).subscribe(e=>{const t=new Blob([e.body],{type:"application/pdf"}),a=URL.createObjectURL(t);window.open(a)})}printAllSelected(e){this.journals.sort((e,t)=>s.utc(e.date).diff(s.utc(t.date)));const t=this.journals.filter(e=>!!e.date),a={businessId:1,fromDate:s(t[0].date).format("YYYY-MM-DD"),toDate:s(t[t.length-1].date).format("YYYY-MM-DD")};this.journalService.getAllJournalPDF(a).subscribe(e=>{const t=new Blob([e.body],{type:"application/pdf"}),a=URL.createObjectURL(t);window.open(a)})}updateJournal(e){}subscribeToSaveResponse(e,t){e.subscribe(e=>this.onSaveSuccess(e.body),()=>this.onError())}onSaveSuccess(e){this.journals=Object(l.a)(this.journals,e),this.paginateJournal(this.journals)}onError(){console.log("Error")}paginateJournal(e){var t,a;if(e){this.journals=[];for(let n=0;n<e.length;n++)e[n].printIcon={iconName:"print"},!e[n].date||(e[n].date=this.createValidDate(e[n].date,"MM.DD.YYYY")),e[n].currency=(null===(t=this.currencies.find(t=>t.id===e[n].currencyId))||void 0===t?void 0:t.isoCode)?null===(a=this.currencies.find(t=>t.id===e[n].currencyId))||void 0===a?void 0:a.isoCode:"-",this.journals.push(e[n])}}trackId(e,t){return t.id}}f.ɵfac=function(e){return new(e||f)(n.ec(r.a),n.ec(p.d),n.ec(h.o),n.ec(i.a),n.ec(d.a))},f.ɵcmp=n.Yb({type:f,selectors:[["jhi-journal"]],decls:3,vars:8,consts:[["title","journal",3,"tableHeaders","data","isCreated","isDeleted","isOnlyView","headerActions","selectActions","searchByDate","dateRangeEmit","actionEmit","updateEmit","headerActionEmit","selectedEmit"]],template:function(e,t){1&e&&(n.kc(0,"jhi-data-table",0),n.vc("dateRangeEmit",(function(e){return t.getDateRange(e)}))("actionEmit",(function(e){return t.getAction(e)}))("updateEmit",(function(e){return t.updateJournal(e)}))("headerActionEmit",(function(e){return t.getHeaderAction(e)}))("selectedEmit",(function(e){return t.getSelectedData(e)})),n.Zc(1,"\n"),n.jc(),n.Zc(2,"\n")),2&e&&n.Fc("tableHeaders",t.tableHeaders)("data",t.journals)("isCreated",!1)("isDeleted",!1)("isOnlyView",!0)("headerActions",t.headerActions)("selectActions",t.selectActions)("searchByDate",!0)},directives:[m.a],encapsulation:2});var b=a(17),j=a(122),v=a(212),A=a(84),D=a(125);class g{constructor(e){this.service=e}resolve(){return this.service.query().pipe(Object(b.a)(e=>e.body))}}g.ɵfac=function(e){return new(e||g)(n.sc(A.a))},g.ɵprov=n.ac({token:g,factory:g.ɵfac,providedIn:"root"});class w{constructor(e){this.service=e}resolve(){return this.service.query().pipe(Object(b.a)(e=>e.body))}}w.ɵfac=function(e){return new(e||w)(n.sc(D.a))},w.ɵprov=n.ac({token:w,factory:w.ɵfac,providedIn:"root"});const y=[{path:"",component:f,data:{authorities:[j.a.USER],pageTitle:"medappointApp.journal.home.title"},resolve:{business:g,currencies:w},canActivate:[v.a]}];class S{}S.ɵmod=n.cc({type:S}),S.ɵinj=n.bc({factory:function(e){return new(e||S)},imports:[[o.a,i.h.forChild(y)]]}),("undefined"==typeof ngJitMode||ngJitMode)&&n.Tc(S,{declarations:[f],imports:[o.a,i.h]})}}]);